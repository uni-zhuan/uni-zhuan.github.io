<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>简单搭个Blog</title>
    <url>/posts/8281edbc/</url>
    <content><![CDATA[<p>本文主要作用是记录下基于hexo搭建博客的过程和一些常用命令，后续的优化也会记录在内。</p>
<span id="more"></span>
<h1 id="hexo博客搭建"><a class="markdownIt-Anchor" href="#hexo博客搭建"></a> Hexo博客搭建</h1>
<h2 id="安装nodejs"><a class="markdownIt-Anchor" href="#安装nodejs"></a> 安装node.js</h2>
<p>之前安装过，略过。</p>
<p>安装淘宝的cnpm管理器，安装成功之后输入<code>cnpm -v</code>查看cnpm版本。</p>
<h2 id="安装hexo"><a class="markdownIt-Anchor" href="#安装hexo"></a> 安装hexo</h2>
<p>输入<code>cnpm install -g hexo-cli</code>安装hexo框架。<br />
输入<code>hexo -v</code>查看hexo版本。</p>
<h2 id="创建博客文件夹"><a class="markdownIt-Anchor" href="#创建博客文件夹"></a> 创建博客文件夹</h2>
<p>在合适的路径创建博客文件夹，在这里文件夹名称以Blog为例，可以手动创建也可以输入命令<code>mkdir Blog</code>创建。<br />
创建好之后通过命令<code>cd</code>进入Blog目录，或在Blog目录下打开cmd。<br />
输入<code>hexo init</code>生成并初始化博客。<br />
输入<code>hexo s</code>启动本地博客服务，Ctrl并点击地址 <a href="http://localhost:4000/">http://localhost:4000/</a> 可以访问本地博客。</p>
<h2 id="创建博客文章"><a class="markdownIt-Anchor" href="#创建博客文章"></a> 创建博客文章</h2>
<p>输入<code>hexo n &quot;articleName&quot;</code>创建新的文章，在 <strong>Blog/resource/_post</strong> 路径下生成 <strong>articleName. md</strong> 文件，可以用vscode等工具进行编辑，参考<a href="https://skylark1003.gitee.io/skylark1003/2022/07/01/Markdown%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/">Markdown基本语法</a>)。<br />
编辑完成后，在Blog路径下输入<code>hexo clean</code>清理。<br />
输入<code>hexo g</code>生成。<br />
输入<code>hexo s</code>再次启动查看，可以看到新建的md文件已被上传。<br />
即每次修改之后可以通过以下命令进行本地效果查看：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo g</span><br><span class="line">hexo s</span><br></pre></td></tr></table></figure>
<p>至此，本地hexo博客搭建完成，下面将其部署到Github仓库中。</p>
<h1 id="部署github"><a class="markdownIt-Anchor" href="#部署github"></a> 部署Github</h1>
<h2 id="github创建个人仓库"><a class="markdownIt-Anchor" href="#github创建个人仓库"></a> GitHub创建个人仓库</h2>
<p>仓库名应该为：用户名.<a href="http://github.io">http://github.io</a> 这个用户名用GitHub帐号名称代替</p>
<h2 id="关联github与hexo"><a class="markdownIt-Anchor" href="#关联github与hexo"></a> 关联Github与Hexo</h2>
<p>配置Blog文件夹下的_config.yml文件，将末尾修改为如下内容。</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">&#x27;https://github.com/uni-zhuan/uni-zhuan.github.io.git&#x27;</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">master</span></span><br></pre></td></tr></table></figure>
<h2 id="部署到github主页"><a class="markdownIt-Anchor" href="#部署到github主页"></a> 部署到Github主页</h2>
<p>在Blog文件夹下输入<code>hexo d</code>将本地博客部署到Github仓库里。</p>
<p>更新Github Pages。</p>
<p>更新之后即可通过网站地址 <a href="https://uni-zhuan.github.io">https://uni-zhuan.github.io</a> 进行访问。</p>
<p>即每次修改之后可以通过以下步骤进行部署：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo g   </span><br><span class="line">hexo d  </span><br><span class="line"> </span><br></pre></td></tr></table></figure>
<h1 id="主题优化"><a class="markdownIt-Anchor" href="#主题优化"></a> 主题优化</h1>
<h2 id="安装主题"><a class="markdownIt-Anchor" href="#安装主题"></a> 安装主题</h2>
<p>安装主题和渲染器：</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="string">git</span> <span class="string">clone</span> <span class="string">https://github.com/tufu9441/maupassant-hexo.git</span> <span class="string">themes/maupassant</span>  </span><br><span class="line"><span class="string">npm</span> <span class="string">install</span> <span class="string">hexo-renderer-pug</span> <span class="string">--save</span>  </span><br><span class="line"><span class="string">npm</span> <span class="string">install</span> <span class="string">hexo-renderer-sass</span> <span class="string">--save</span>  </span><br></pre></td></tr></table></figure>
<p>编辑Hexo目录下的 _config.yml，将theme的值改为maupassant。</p>
<p>注：hexo-renderer-sass 插件依赖已经过期导致 npm install 失败，解决方法为修改 package.json 配置，并重新进行<code>npm i</code>操作</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">&quot;hexo-renderer-sass&quot;:</span> <span class="string">&quot;github:cocowool/hexo-renderer-sass&quot;</span><span class="string">,</span></span><br></pre></td></tr></table></figure>
<h2 id="优化主题"><a class="markdownIt-Anchor" href="#优化主题"></a> 优化主题</h2>
<p>在 Hexo 中有两份主要的配置文件，其名称都是 _config.yml。 站点配置文件位于站点根目录下<strong>Blog/_config.yml</strong>，主要包含 Hexo 本身的配置；主题配置文件位于主题目录下<strong>Blog/themes/主题名称/_config.yml</strong>，这份配置由主题作者提供，主要用于配置主题相关的选项。</p>
<h3 id="站点配置"><a class="markdownIt-Anchor" href="#站点配置"></a> 站点配置</h3>
<p>修改Site中<code>author</code>及<code>language</code>部分，其他的看着改。</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">title:</span> <span class="string">鳴轉のブログ</span></span><br><span class="line"><span class="attr">subtitle:</span> <span class="string">&#x27;啭る鸟は羽ばたかない&#x27;</span></span><br><span class="line"><span class="attr">description:</span> <span class="string">&#x27;学计算机，在读书。&#x27;</span></span><br><span class="line"><span class="attr">keywords:</span></span><br><span class="line"><span class="attr">author:</span> <span class="string">鳴轉</span></span><br><span class="line"><span class="attr">language:</span> <span class="string">zh-CN</span></span><br><span class="line"><span class="attr">timezone:</span> <span class="string">&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
<h3 id="主题配置"><a class="markdownIt-Anchor" href="#主题配置"></a> 主题配置</h3>
<h4 id="导航菜单"><a class="markdownIt-Anchor" href="#导航菜单"></a> 导航菜单</h4>
<p>主要修改menu、info、links等信息，若需要增添部分功能按键，参照<a href="https://www.haomwei.com/technology/maupassant-hexo.html">大道至简博客</a>。</p>
<p>导航菜单中集成了FontAwesome图标字体，可以在<a href="http://fontawesome.io/icons/">这里</a>选择新的图标，并按照相关说明使用。</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># menu 导航菜单，可添加更换icon</span></span><br><span class="line"><span class="attr">menu:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">page:</span> <span class="string">home</span></span><br><span class="line">    <span class="attr">directory:</span> <span class="string">.</span></span><br><span class="line">    <span class="attr">icon:</span> <span class="string">fa-home</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">page:</span> <span class="string">archive</span></span><br><span class="line">    <span class="attr">directory:</span> <span class="string">archives/</span></span><br><span class="line">    <span class="attr">icon:</span> <span class="string">fa-archive</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">page:</span> <span class="string">tags</span></span><br><span class="line">    <span class="attr">directory:</span> <span class="string">tags/</span></span><br><span class="line">    <span class="attr">icon:</span> <span class="string">fa-tags</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">page:</span> <span class="string">categories</span></span><br><span class="line">    <span class="attr">directory:</span> <span class="string">categories/</span></span><br><span class="line">    <span class="attr">icon:</span> <span class="string">fa-folder-open</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">page:</span> <span class="string">albums</span></span><br><span class="line">    <span class="attr">directory:</span> <span class="string">albums/</span></span><br><span class="line">    <span class="attr">icon:</span>  <span class="string">fa-camera</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">page:</span> <span class="string">about</span></span><br><span class="line">    <span class="attr">directory:</span> <span class="string">about/</span></span><br><span class="line">    <span class="attr">icon:</span> <span class="string">fa-user</span></span><br><span class="line"></span><br><span class="line"><span class="attr">widgets:</span> </span><br><span class="line">  <span class="bullet">-</span> <span class="string">search</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">info</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">category</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">tag</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">recent_posts</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">recent_comments</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">links</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Site</span></span><br><span class="line"><span class="attr">info:</span></span><br><span class="line">  <span class="attr">avatar:</span> <span class="string">/img/avatar.png</span></span><br><span class="line">  <span class="attr">discription:</span> <span class="string">啭る鸟は羽ばたかない</span></span><br><span class="line">  <span class="attr">outlinkitem:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">twitter</span></span><br><span class="line">      <span class="attr">outlink:</span> <span class="string">https://twitter.com/uni_zhuan</span></span><br><span class="line">      <span class="attr">message:</span> <span class="string">Twitter</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">envelope</span></span><br><span class="line">      <span class="attr">outlink:</span> <span class="string">mailto:wangjw@shu.edu.cn</span></span><br><span class="line">      <span class="attr">message:</span> <span class="string">Email</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">github</span></span><br><span class="line">      <span class="attr">outlink:</span> <span class="string">https://github.com/uni-zhuan</span></span><br><span class="line">      <span class="attr">message:</span> <span class="string">Github</span></span><br></pre></td></tr></table></figure>
<h4 id="启用目录"><a class="markdownIt-Anchor" href="#启用目录"></a> 启用目录</h4>
<p><strong>主题配置文件</strong>中将toc属性值改为true。</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">toc:</span> <span class="literal">true</span> <span class="comment"># 是否开启文章章节目录导航</span></span><br></pre></td></tr></table></figure>
<p>之后在发布文章时，每篇文章（*.md文件）的开头部分添加以下代码即可。</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">Title</span></span><br><span class="line"><span class="attr">date:</span> <span class="string">YYYY-MM-DD</span> <span class="string">hh:mm:ss</span></span><br><span class="line"><span class="attr">tags:</span>        <span class="comment"># 标签 </span></span><br><span class="line"><span class="bullet">-</span> <span class="string">tag1</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">tag2</span></span><br><span class="line"><span class="attr">categories:</span>  <span class="comment"># 分类</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">categoriy</span></span><br><span class="line"><span class="attr">toc:</span> <span class="literal">true</span> <span class="string">or</span> <span class="literal">false</span>    <span class="comment"># 是否启用目录索引</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure>
<h3 id="css修改"><a class="markdownIt-Anchor" href="#css修改"></a> CSS修改</h3>
<p>在浏览器中打开主页并<strong>右击-&gt;检查</strong>，通过这种方式定位某部分样式在css文件代码中的位置，可以先在浏览器中修改预览效果，后在<strong>themes/theme name/source/css/style.css</strong>文件中进行修改。</p>
<h1 id="搭建图床"><a class="markdownIt-Anchor" href="#搭建图床"></a> 搭建图床</h1>
<p>写博客不可避免地需要一个稳定的图床，用于存放图片。由于github需要科学上网，在其他设备显示可能存在问题，gitee由于开源需要审核，用作图床会导致无法开源，且上传图片有2MB的大小限制，所以最终选择了阿里云OSS搭配PicGo进行搭建。</p>
<h2 id="阿里云oss"><a class="markdownIt-Anchor" href="#阿里云oss"></a> 阿里云OSS</h2>
<h3 id="购买阿里云oss"><a class="markdownIt-Anchor" href="#购买阿里云oss"></a> 购买阿里云OSS</h3>
<p>在<a href="https://www.aliyun.com/product/oss?spm=5176.19720258.J_3207526240.36.7d7776f4Rd5Evq">阿里云对象存储OSS</a>页面点击折扣套餐，选择所需服务。</p>
<h3 id="创建bucket"><a class="markdownIt-Anchor" href="#创建bucket"></a> 创建Bucket</h3>
<p>在产品与服务中找到对象存储OSS服务，点击创建Bucket，读写权限选择公共读。</p>
<h3 id="创建accesskey"><a class="markdownIt-Anchor" href="#创建accesskey"></a> 创建AccessKey</h3>
<p>在管理AccessKey中点击创建AccessKey，即可获得AccessKey ID和AccessKey Secret，注意保存。</p>
<h2 id="picgo"><a class="markdownIt-Anchor" href="#picgo"></a> PicGo</h2>
<p>在<a href="https://github.com/Molunerfinn/PicGo/releases">PicGo</a>进行下载安装。</p>
<p>在图床设置中选择阿里云OSS，填写相应信息，确定并设置为默认。</p>
<p>配置完之后就可以使用了，在上传区可以通过拖拽或点击上传图片，上传后自动复制url至剪贴板，在相册中可以对图片进行操作。</p>
<h1 id="其他改进部分"><a class="markdownIt-Anchor" href="#其他改进部分"></a> 其他改进部分</h1>
<h2 id="目录改进"><a class="markdownIt-Anchor" href="#目录改进"></a> 目录改进</h2>
<p>原先的目录在正文上方显示，当有长代码段情况时排版杂乱，并且每次需要目录时都需要回到顶部的操作对长文章并不友好，故尝试对目录移至侧栏并固定。</p>
<h3 id="布局更改"><a class="markdownIt-Anchor" href="#布局更改"></a> 布局更改</h3>
<h3 id="样式更改"><a class="markdownIt-Anchor" href="#样式更改"></a> 样式更改</h3>
<h3 id="添加js文件"><a class="markdownIt-Anchor" href="#添加js文件"></a> 添加js文件</h3>
<ul>
<li>相册怎么搞</li>
<li>友链 md</li>
</ul>
<!-- ![](https://uninaruto.oss-cn-shanghai.aliyuncs.com/img/%M%6WBHUSU[O5BC6[U$I5DY.png) -->
<img src="https://uninaruto.oss-cn-shanghai.aliyuncs.com/img/%25M%256WBHUSU%5BO5BC6%5BU%24I5DY.png">
<hr />
<blockquote>
<ul>
<li>
<p><a href="https://skylark1003.gitee.io/2022/07/01/hexo%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/">雀栎的Blog</a></p>
</li>
<li>
<p><a href="https://zhuanlan.zhihu.com/p/26625249">GitHub+Hexo 搭建个人网站详细教程</a></p>
</li>
<li>
<p><a href="https://www.haomwei.com/technology/maupassant-hexo.html">大道至简——Hexo简洁主题推荐</a></p>
</li>
</ul>
</blockquote>
]]></content>
      <categories>
        <category>工具</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>oss</tag>
      </tags>
  </entry>
  <entry>
    <title>2022-2023</title>
    <url>/posts/f166f40a/</url>
    <content><![CDATA[<p>2022马上就要过去了，一边看红白歌合战一边开始写年度总结。除了跨年时祝大家新年快乐之外，过去的二十几年从未主观上做过庆祝新年的活动，所谓仪式感也是我略有些鄙夷的（可能是某种可笑的清高）。即使这样，我也隐隐感到一点：从明年开始，我的人生即将进入新的阶段———继续读书，但是确凿为了自己读书。废话太多，这篇是年度总结。</p>
<span id="more"></span>
<p>首先以一年间我的“短视”开头吧，之所以说“短视”，是因为原本延迟满足的思维在今年有了很大转变。可能是因为上海的封控，我不止一次体会到什么是朝不保夕。想做的事就去做，想读的书就开始读，想看的电影就立刻看，想吃什么、想去哪里可以立刻动身，毕竟没人知道明天是否会有新的阻碍加诸己身。</p>
<p>在校园里坐井观天的时间里的某天，和朋友去图书馆，找到了余华的新书《文城》，买了饮料喝，在猫猫营地找小猫，心情很快乐，但接下来很长一段时间内没能再去图书馆，书也无法再还，《文城》就那样在我宿舍的架上摆着。它理应辗转很多同学之手，却无奈困于书桌一隅，我觉得我当时当地的处境与其无异···又绕回去了，应该谈的是延迟满足的问题。我也记得某天在伟大的哲学家xxx的雕像下吃午饭，阳光很暖，吃完就靠在那里睡了午觉。一个小时不到的、坐着的、阳光直射的睡眠，却是我那段时间最舒适的休憩，完全放空，只感到温暖，教学楼的教室正被上一届考研人用作面试所需，但在那段睡梦内我确实抛却了对即将来临的几个月的恐慌。</p>
<p>保研名单出后的几天晚上，每天都去学校里散步，和朋友打电话的时候我说，好像大学的几年都没有过这样松弛的日子。去向已定，努力有了结果，于是我看到草坪上一些团体在唱歌飞盘、路上社团练习滑板，情侣在长凳上黏腻，我又想我究竟错过了什么，那些错失与我的收获对等吗？我永远知道这思考完全没有必要，正是反事实的基本概念，没有经过具体状态便无法得知结果，但这些思绪到现在仍然纠缠着我。如果不那么理想主义，愿意放弃一些执著、忽略一些差异，也许会过得更幸福才对，有很多事情也不会还没开始就结束了，就这些想法，无谓！无谓！我本来就晓得的。</p>
<p>说点其他的，十二月中去了长沙，周日起意，当天就买了车票，想去的地方就要立刻去。看了很多吃了很多，每天走很多路，对这个城市还算喜欢，比上海平易，又比小城市便利，各处的自媒体和宣发或许显得浮躁和娱乐化，但这也是这个新都市的特征之一。至于城市中的人，这简直像一座爱城，从商圈走到湘江畔，可看到年轻爱侣及黄昏之恋，潮男潮女自不必说，湘江旁的步道上的中老年人集会场所更加吸睛。都市商厦和历史遗存一水相隔，中国多少城市都是这样以江河分隔，好像不言而喻的传统。</p>
<p>向前向后数二十年，可能都不会再有一年能读这么多书、观看这么多作品。因居家和封校得到了空闲，又因精神上的压力和痛苦想转而寻求文艺上的解脱，其结果就是个人思想态度的定型。也许对于没步入社会的青年，定型二字为时尚早，但我总有人生基调已然形成之感。这并不是坏事，我头一次真正不在社会规训和旁人期望下，找到自己下一阶段想达到的目标。从现在开始还有三年时间，我把它作为前往新天地的准备时间，准备学识、准备语言、准备金钱、准备即将到来的一切，我想过新的生活，而且不再是口头上说说。</p>
<p>现在是凌晨三点，和朋友聊了很久的天耽误了码字。本还想记录下疫情，这可是2022的头等大事，但是既已阳了，无后顾之忧，向街上看，过去的封控就像没发生一样，中国人很善于疗伤。冬天尚未过完，会响起更多哀乐，也只能坦然的接受。已经是该把三月到六月、十月到十二月的回忆埋藏的时候了，但我知道它无法被消解，那些日子和文字已经刻在我的灵魂上了，如同上一段话所说。熬过这个冬天，春天也就来了。我认为今年会比去年更好，最糟的日子已经过去了，长久以来都悬在头顶的达摩克利斯之剑好像一夜之间消失了，人要向前看。</p>
<p>最后是俗套的新年规划环节，前天玩了小测试，测来年会得到什么，结果是money、sex、peace。赚钱毋庸置疑，不能只省钱，还要想点办法搞钱，都是未来的启动资金；至于sex，就算思想上完全接受性和爱可以分离，阿宅的社交范围也提供不了条件，但就当前情况来讲找到谁去爱还是遥遥无期，按下不表；peace嘛，一定要有平和的心态，即将到来的研究生生活上是、待人接物上是，网络冲浪上是，从现在开始，可以减少并转移社交平台了。一定要有平稳的生活，健身环玩得动，健康不要出问题，自认为也不会被骗财骗色，“只想过平静的生活”的目标要达到。扯这么多也没用，概括下就是：健康、存钱、语言、学有所成、丰富精神生活，如果能达到就太好了，毕竟已经放弃了一些事情了，对吗。</p>
]]></content>
      <categories>
        <category>Record</category>
      </categories>
      <tags>
        <tag>summary</tag>
        <tag>daily</tag>
      </tags>
  </entry>
  <entry>
    <title>希腊神话游观</title>
    <url>/posts/68913bca/</url>
    <content><![CDATA[<p>打开了一扇窗户而向花园里窥看着时，还有不想跑进去游观的吗?</p>
<p>对我来说，希腊神话和格林童话一样，是认字时的读物，将近二十年后，决定再次了解希腊神话的整个体系。</p>
<span id="more"></span>
<p>这篇想到哪写到哪，什么想说就多说。</p>
<h1 id="读书"><a class="markdownIt-Anchor" href="#读书"></a> 读书</h1>
<h2 id="希腊神话与英雄传说"><a class="markdownIt-Anchor" href="#希腊神话与英雄传说"></a> 希腊神话与英雄传说</h2>
<p>在图书馆时，郑振铎先生的这一译本与陕师大出版社的某一插图本令我有些两难。但翻到：*自然界美丽可爱，澄湖如镜，绿草若毡，鸟类飞鸣上下，如在歌舞，群兽也都徜徉自得，各适其性；春夏则绿林怒茁，繁花杂缀，其富丽如入金张之堂，秋冬则枯叶乱飞，白云邈远，其萧爽有如听洞箫在月湖上的独奏。独有裸露可怜的人类，奔走于其间，不设阱以陷物，便避仇以求安；不群居而哄斗，便类出而寻仇。*这段——嗯，选对了。</p>
<h3 id="前言"><a class="markdownIt-Anchor" href="#前言"></a> 前言</h3>
<blockquote>
<p>所有的动物都是四足伏地而走的，它们的双眼只能凝注于地上而不能仰视。对于人类，普罗米修斯却给以直立的躯体、高仰的头部，双眼得以观望四方与上下；还有空闲出来的双手，得以握捉到并制造出应用的东西。因此，他们得以高视远瞩，仰观俯察，充分地发展他们自己的才能与性灵。但当埃庇米修斯创造各种动物时，已将原料几乎都用尽了。他给这兽以善走的捷足，给那鸟以尚飞的羽毛，给此以杀敌的爪牙，给彼以护身的甲壳；人类却赤裸裸的一无所有，只除了高出于万物的丰裕的智力与直立的躯体。他们经过了黄金时代与白银时代，很快乐地生活着。但这两个时代的人类都无所出。第三个时代乃是青铜时代，这时代与前大不相同。这时，他们渐渐繁殖得多了，竟招致了神与人之主宙斯（Zeus）的恼怒。</p>
</blockquote>
<p>火之鸟未来篇里，智慧生命不断更迭、繁殖、争斗、死亡，而叙述主体作为神仅是旁观。希腊神话中的神祗与人类是有着积极的互动的，这与中国神话和日本神话都不太相同。题外话，王小波的黄金、白银、青铜时代三部曲是不是正取自这里呢？</p>
<h3 id="色萨利的传说"><a class="markdownIt-Anchor" href="#色萨利的传说"></a> 色萨利的传说</h3>
<p>这一章主要讲色萨利国王埃俄罗斯与其子孙的故事，应该画一张人物关系图，不过先搁置。</p>
<p>阿塔玛斯（Athamas）的故事中，已有一妻的阿塔玛斯为结盟而要另娶，原配碎心而死，前妻的子女也受到新妻迫害。尽管新妻最终以自己的两个孩子及自己的生命偿付作结，但悲剧故事的起源还是负心汉阿塔玛斯，女人和孩子不过是因他变心而起的牺牲品，他自己却活到年老，赫拉的复仇之矛偏了啊。</p>
<p>本篇中的重头戏是伊阿宋的传说，关于他就放在<a href="https://uni-zhuan.github.io/2022/09/07/%E5%B8%8C%E8%85%8A%E7%A5%9E%E8%AF%9D%E6%B8%B8%E8%A7%82/#%E4%BC%8A%E9%98%BF%E5%AE%8B%EF%BC%88Jason%EF%BC%89">后面这里</a>来讲。</p>
<h3 id="阿尔戈斯系的传说"><a class="markdownIt-Anchor" href="#阿尔戈斯系的传说"></a> 阿尔戈斯系的传说</h3>
<p>本篇有趣的故事分别关于达那俄斯的女儿们和珀尔修斯，后者的故事在<a href="https://uni-zhuan.github.io/2022/09/07/%E5%B8%8C%E8%85%8A%E7%A5%9E%E8%AF%9D%E6%B8%B8%E8%A7%82/#%E7%8F%80%E5%B0%94%E4%BF%AE%E6%96%AF">这里</a>加以讲述。</p>
<p>自由总是相对的。对于阿尔戈斯的市民而言，共和主义让他们拥有畅所欲言的权力，统治者看似无法影响人民大会作出的决定；但实际上，他们的统治者也能够通过信息差和权术无形中影响人民大会的民主决议。</p>
<p>希腊神话中的人间女郎，她们的人生很少不与嫁娶挂钩，若无嫁娶，则是在什么海边或林里和路过的宙斯或波塞冬此类结合了，达那俄斯的女儿们也不出其右，但既然她们的故事作为正篇标题，我愿意相信女郎们是作为英雄人物被记述。</p>
<p>想想她们做的事，或被做的事：出于对圣律的尊敬逃脱结婚；为保护兵士与城池主动下嫁；完婚夜为圣诫杀夫；赎罢罪后又被潦草下嫁。她们是具有同男性英雄一样的品格的，纯洁地相信神、敢于献身与忍受苦难，但女性的身份似乎让这一切都变得更加理所当然。而逃脱这悲惨宿命的两个姐妹又是以何为契机呢？最大的姐姐与陷入爱情，放弃杀夫而被赦免；最小的妹妹与宙斯结合，得以离开国土。不排除我的神经总会为诸如此类事情变得更加敏感，她们因男人而获罪，最后仍借由男人得以解脱，何尝不是一种讽刺。</p>
<h3 id="战神阿瑞斯系的英雄"><a class="markdownIt-Anchor" href="#战神阿瑞斯系的英雄"></a> 战神阿瑞斯系的英雄</h3>
<h3 id="底比斯的建立者"><a class="markdownIt-Anchor" href="#底比斯的建立者"></a> 底比斯的建立者</h3>
<h3 id="赫拉克勒斯的生与死"><a class="markdownIt-Anchor" href="#赫拉克勒斯的生与死"></a> 赫拉克勒斯的生与死</h3>
<h3 id="雅典系的传说"><a class="markdownIt-Anchor" href="#雅典系的传说"></a> 雅典系的传说</h3>
<h3 id="珀罗普斯系的传说"><a class="markdownIt-Anchor" href="#珀罗普斯系的传说"></a> 珀罗普斯系的传说</h3>
<h2 id="希腊罗马神话传说中的恋爱故事"><a class="markdownIt-Anchor" href="#希腊罗马神话传说中的恋爱故事"></a> 希腊罗马神话传说中的恋爱故事</h2>
<h2 id="伊利亚特"><a class="markdownIt-Anchor" href="#伊利亚特"></a> 伊利亚特</h2>
<h2 id="奥德赛"><a class="markdownIt-Anchor" href="#奥德赛"></a> 奥德赛</h2>
<h1 id="图鉴"><a class="markdownIt-Anchor" href="#图鉴"></a> 图鉴</h1>
<h2 id="希腊神话中的美男子"><a class="markdownIt-Anchor" href="#希腊神话中的美男子"></a> 希腊神话中的美男子</h2>
<p>这里所指的美男子只有容貌美而已，心灵丑恶的美男子我大加斥责。</p>
<h3 id="伊阿宋jason"><a class="markdownIt-Anchor" href="#伊阿宋jason"></a> 伊阿宋（Jason）</h3>
<blockquote>
<p>但神秘的奇迹终于发生了，一个预期的人终于出现在伊俄尔科斯了。这个人肩着两支猎枪，身上穿着当时国人所穿的衣服，大衣紧裹在身上，衣外还披着一张山豹的皮。他似乎正在青春的花期，他的金黄色头发的鬈曲发结似还未经过剪刀，如日光之流泻似的披到他的背上。这时正是早市的忙碌时期。这个客人无人注意地走进城门，在市场的人群中站了一会儿。现在百姓注意到他了，那么美貌英俊的一位少年，却没有一个人认识，他们心中异常惊奇，对邻近的人互相耳语道：“当然的，他不会是阿波罗吧？或者他是阿弗洛狄忒的主人，坐在铜车上的他吧？或者他是少年的奥托斯或他的双生兄弟埃菲阿尔特斯吧？不，人家说，他们早已死在膏沃的纳克索斯了。而我们知道，提提俄斯（ Tityus）也已为勒托（Leto）的孩子所射死，为之后追求禁忌的快乐的人的警戒。”</p>
</blockquote>
<p>而我们知道要感谢百姓，因为他们提供了其他美男子的线索。感觉之所以大家欢欣鼓舞地迎他继位很大程度上也是因为他俊美的外形。</p>
<p>伊阿宋的传说绝大部分有关于他对于金羊毛的寻求以及与美狄亚的爱恨情仇故事，这一英雄角色在获得名誉前后的割裂也是最令人扼腕的。当他出发寻找金羊毛时，他的目的较为单纯：助失势的父亲埃宋复位；但当他成功夺取金羊毛，带上许诺为妻的异乡公主美狄亚回到故土后，金羊毛于他不过成为了一笔财富，年少时追求的理想终成为俗物。</p>
<p>伊阿宋的不忠是必然的，他是因美狄亚与他的帮助而承诺结婚，但内心仍然惧怕巫公主的法术，他选择柯林斯公主作为再结婚对象某种程度上也出于对美狄亚能力的恐惧，与王国中最有权势的女性结婚，潜意识里带有对抗的思维，以确保与美狄亚割席后减少损害。</p>
<p>伊阿宋和美狄亚的争论非常能够反映人物的角色特征和心理状态，下面截取伊阿宋是怎样PUA美狄亚，试图说服她及自己、以及美狄亚如何冷静理智地反驳：</p>
<blockquote>
<p>这两个人彼此默默地互视了一会儿，然后伊阿宋换上了一副愤怒的容色与声音，有如一个人知道自己是不会被宽恕的，匆促地说道：“我警告过你多少次，美狄亚，要你不要乱发脾气，总是没有效力！好，你看现在得到了什么！如果你静静地服顺着，便可保有这个家庭和你的一切安乐…但不，你大怒起来，恐吓、咒骂王家，因此便这样得到了放逐的责罚…这是国王的意思，不是我的，你必须明白。至于我，随你如何称心称意地责我、骂我。真的，我己经尽过力去劝克瑞翁宽恕了你，但他不听我的话！你看，这乃是你自己的过失，使你被逐出柯林斯⋯然而，我并不是来责备你的，美狄亚，而是来看看你是否旅用有所缺乏。如果你自己或孩子们要用什么，你只要开口⋯我有黄金可以运用，我恳切地愿你不至于缺乏什么，因为，你虽憎我恨我，我却是永远对你好意的。</p>
</blockquote>
<ul>
<li>推咎过错。巧妙地将美狄亚被逐出的灾难归于美狄亚自身错处及国王的不能宽恕，将自己的位置放低（尽管自己已成为利益既得者），却展现自己的宽容及阔绰一面，作出一些无关痛痒的承诺。</li>
</ul>
<blockquote>
<p>伊阿宋看见他的妻镇定地听着他的话，便恢复了他的自信力。他说了最后的话，便走近她，微笑着，温柔地将手搁在她的肩上。但美狄亚如遇蛇蝎似的将他的手摆脱了，盛怒得颤抖不已，叫道：“你是一个下流的坏人，你怎么还到这里来？你在结婚之后，怎么还敢来看我？这是你的勇敢吗，最有胆的伙伴？啊，你是不怕我的！我将告诉你为什么，因为你的下流灵魂中，没有羞耻能够触到你！现在回答我——我要在你自己的口中证实你——谁在科尔基斯救了你的性命？谁为你赢得了金羊毛？谁为你在我们的长途海行中一次再次地救全了你？当阿尔戈归家时，谁将珀利阿斯结果了，为的是这狡敌的生存使你不安？你站在那里，声儿不响，似乎是要我代你回答似的…是她！她办了这一切事，全为的是爱你！这位妻，你是立了誓，要爱她护她的…你却欺叛了她，作为她的报偿！你的妻，我说…啊，你孩子们的母亲…你有什么理由不使你的不忠成为一个罪恶？如果我不会生子的话，我将不阻止你去娶别一个妻，使得你有子传宗。一个男子没有子息是异常痛苦的。但我已为你生了两个可爱的孩子了！唉，天哪，他们必领成为被弃的的与无家的而长成了，在异邦的人之中求乞以生了！真的，这将在希腊大大地增加你的名誉，因为每个城市的百姓看见我们的可怜情况时，便将说道：‘看呀，这些孩子乃是幸福的伊阿宋、那个快乐的新郎的儿子。这是美狄亚，他的救命的恩人…”唉，不知恩的，虚伪的，发假誓的，我为什么不能在伪善的假面具之下看得出呢？为什么神道们造了试金石以试黄金，却不造一种东西来试人的心呢？我给子了一切，得到的却是垃圾。”</p>
</blockquote>
<ul>
<li>忘恩负义。美狄亚出于爱，一直为伊阿宋铲除异己。伊阿宋对这一点心知肚明，却变相地将其视为美狄亚凶猛阴险的证据而要背弃她。</li>
<li>伪善狡猾。伊阿宋的对于其暗敌无动于衷，是默许了美狄亚在不弄脏自己手的情况下将敌人结果。由于巫公主的名号，世人只会将对方的死归咎于美狄亚的凶残，而并不会指责实为幕后主导的伊阿宋本尊。</li>
<li>冷漠残忍。伊阿宋的背弃不止是对美狄亚，更是对他两个孩子的不负责，这也是他最令我气愤的一点，从这一行为中完全不可见其父性。他只追求自己的利益和幸福，而弃血亲于不顾。另：此段中所谓“有子传宗”的辩驳完全可见当时社会的男性本位思想，在今天需厘清这一点。</li>
</ul>
<blockquote>
<p>伊阿宋走到她面前，虽然脸色红了，却很镇定地说道：“你说过你的话了，夫人，我是忍耐地静听着。但现在你要听我的，因为我被诬蔑了，这是我的权利，我要为自己辦护。〞美狄亚的头低着，她的面幕已蔽了下来，但她的手势表示允诺之意。伊阿朱继续说道：“第一，你说了许多你帮助我的所在，我只要说我在寻求金羊毛一役中，我的真正的唯一的救护者乃是阿弗洛狄忒。因为你是那么溺陷于爱情之中，你便不自禁做了一切你所做的事。你救全了我的性命，仅为的是你要得到你所要的人。然而坚执此层是不对的，我也不欲否认你对于我的功绩。但我要告诉你，这些功绩虽大，却己经偿报过了。我不曾带你从野蛮的地方到这个美丽的希腊来吗？这里是为法律与秩序所统治的，而那里却是野蛮的暴力的。你的智慧与魔术不是在希腊人之中无人不知的吗？要不是我，则除了几个辽远而野蛮的都落之外，你将永无人知的了。真的，如果我们算起旧账来，我想，我乃是你的债主，并不是你的欠户。但这话说得够了…我从不曾说过，完全是你逼我说出的…现在，说到这次的婚事，你那么厉害地责备我——”</p>
<p>美狄亚插嘴说道：“啊！”她落下了她的面幕，安静地看着他，“我很奇怪，你竟将这笔账目算得那么好，虽然你并不比你所说的高明。”</p>
</blockquote>
<ul>
<li>又一次偷换主体：声明帮助他的乃爱神而非美狄亚，因为是爱神使美狄亚情不自禁地陷入爱河（？）</li>
<li>强调地位。伊阿宋将自己的地位抬高至施恩者，将他的将美狄亚带离故土的行为视为恩赐，但这所谓恩赐是单方面的，美狄亚在权衡是否要帮助伊阿宋时，内心是不欲离开生养自己的国土的，伊阿宋认为的野蛮只是另一种生活的方式，而他并没有真正意识到这一点。可见他从未试图真正了解美狄亚，并且在他心里一直存在着这样的高下之分。</li>
</ul>
<blockquote>
<p>伊阿宋继续说道：“那么，让我告诉你，你是完全误会了我求结这次婚姻的原因。这并不是因为我已厌倦了你，或爱上了别人；我的简单目的远远地离了不忠贞，乃是为了你及你的孩子们的幸福。我在娶了国王的独女之外，还能用什么更好的方法去得到它呢？啊，美狄亚，假如你不为妒忌所盲目，便可看出那是个如何巧妙的计策！她的嫁妆可以使我们一生富裕…有了这个婚姻，我便成了一个市民，是国王以外的柯林斯的最有权力的人了…在一切之上的，是我们的孩子的命运决定了，他们兄弟俩有天会成了统治的王。然而你说我不是一位好父亲！但这是妇人的常道…她们在世界上只知注意一件事，只要一个男人将自己给了她，不管他的罪恶如何，都是一个完美的人…但如果他弃了她，他便成了世界上最残忍的坏人了，虽然他尽力做了种种的事来服待她…唉，如果神道们没创造你们女性而创造了别一种东西，为我们男人传宗接代之用，则我们将如何的快乐呀！</p>
<p>伊阿宋停了一会儿，透了一口气。他的妻问道：“你还要说什么话？”他答道：“没了，美狄亚，除非你要我重述我方才告诉过你的：我之所以缔结这次的婚姻，完全是为了你的好处。”</p>
<p>她答道：“你真是一个长于言辞的坏人，但一个简单的问题便可以问住了你：你为何不预先告诉我你要办这件事呢？”</p>
<p>伊阿宋随口答道：“因为我知道你将如何应付它。要求你允许这件使你狂怒的婚事是一无所用的！你不会听我的理由的。”</p>
<p>美狄亚叫道：“不，因为这些话都是谎！唯一的真情是，你对于你的野蛮的妻觉得可羞，便要找一条更好的路。”</p>
<p>伊阿宋答道：“你不要那么不公平地对待我！我知道，再谈下去也无益。我只好让你去度你自择的命运去。但为了我们己往的事，我渴想帮助你的旅行。我有朋友在别的城市中…让我给你信，你好去找他们，他们一定会高兴地款待你的。你也将有钱——</p>
<p>美狄亚打断了他的话，说道：“你以为我将受你的恩惠吗，或将和称你为友的人有交涉？现在走吧！为什么逗留不去？我知道你急于再到你的新娘身边去⋯一小时的离别对于新婚的爱人真是一世之久！去，当你还能够和喜爱的新妇玩着的时候。但这不是很长久的，宙斯的意思。”</p>
</blockquote>
<ul>
<li>很能说谎。伊阿宋假设中的情景并不存在，因为当他与公主缔结婚约，美狄亚注定会被驱逐，但他坚称他的举动都是为了妻儿的幸福，到此他的荒唐已经一览无余，然而这谎话又是半真半假的，因为他确实是要成为柯林斯最有权势的人，不过这权势则与美狄亚和孩子毫无关系了。到了最后，他也显出本心：<em>唉，如果神道们没创造你们女性而创造了别一种东西，为我们男人传宗接代之用，则我们将如何的快乐呀！</em> 我猜度，即使在现在，这也是不少貌远甚不如伊阿宋之流的心声吧。</li>
</ul>
<h3 id="珀尔修斯"><a class="markdownIt-Anchor" href="#珀尔修斯"></a> 珀尔修斯</h3>
]]></content>
      <categories>
        <category>文学</category>
      </categories>
      <tags>
        <tag>Greek Mythology</tag>
        <tag>books</tag>
      </tags>
  </entry>
  <entry>
    <title>采样算法调研</title>
    <url>/posts/1510c780/</url>
    <content><![CDATA[<p>采样方法的调研归纳，ML基础知识。</p>
<span id="more"></span>
<h1 id="取样算法"><a class="markdownIt-Anchor" href="#取样算法"></a> 取样算法</h1>
<h2 id="uniform-random-sampling-均匀随机取样"><a class="markdownIt-Anchor" href="#uniform-random-sampling-均匀随机取样"></a> Uniform Random Sampling 均匀随机取样</h2>
<p>生成[0,1]之间的伪随机数序列equal to均匀分布</p>
<h2 id="low-discrepancy-sampling-低差异取样"><a class="markdownIt-Anchor" href="#low-discrepancy-sampling-低差异取样"></a> Low-Discrepancy Sampling 低差异取样</h2>
<h3 id="discrepancy差异值"><a class="markdownIt-Anchor" href="#discrepancy差异值"></a> Discrepancy（差异值）</h3>
<p>衡量采样序列质量，描述采样点在采样空间内分布的均匀程度<br />
<img src="https://uninaruto.oss-cn-shanghai.aliyuncs.com/img/2022-12-10-15-58-43.png" alt="" /></p>
<p>$ D_N(P)=\sup _{B\in J}|\frac{A(B)}{N}-\lambda_s(B)|$</p>
<p>对于一个在<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>0</mn><mo separator="true">,</mo><mn>1</mn><msup><mo stretchy="false">]</mo><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">[0,1]^n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mclose"><span class="mclose">]</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span>空间中的点集，任意选取一个空间中的区域<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi></mrow><annotation encoding="application/x-tex">B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span></span></span></span>，此区域内点的数量<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal">A</span></span></span></span>和点集个数的总量<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span>的比值和此区域的体积<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>λ</mi><mi>s</mi></msub></mrow><annotation encoding="application/x-tex">\lambda_s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">λ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">s</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>的差的绝对值的最大值，就是这个点集的Discrepancy。分布越均匀的点集，任意区域内的点集数量占点总数量的比例也会越接近于这个区域的体积。</p>
<h3 id="lhslatin-hypercube-sampling算法"><a class="markdownIt-Anchor" href="#lhslatin-hypercube-sampling算法"></a> LHS/Latin hypercube sampling算法</h3>
<p>多维算法，需要将采样空间按照维度进行分层。假设现在要采样<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span>个点, LHS算法先将整个采样区域每个维度分成<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span>份, 然后沿着对角线带抖动采样, 再将每个轴坐标进行随机进行排列。<br />
<img src="https://uninaruto.oss-cn-shanghai.aliyuncs.com/img/2022-12-10-16-16-57.png" alt="" /></p>
<p>具有良好的点分布，避免多维下分层采样随机数的聚集。</p>
<h3 id="halton序列"><a class="markdownIt-Anchor" href="#halton序列"></a> Halton序列</h3>
<p>任意一个非负整数<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi></mrow><annotation encoding="application/x-tex">a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">a</span></span></span></span>都可以表示为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>b</mi></mrow><annotation encoding="application/x-tex">b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal">b</span></span></span></span>进制的一串数字<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mi>m</mi></msub><mo stretchy="false">(</mo><mi>a</mi><mo stretchy="false">)</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><msub><mi>d</mi><mn>2</mn></msub><mo stretchy="false">(</mo><mi>a</mi><mo stretchy="false">)</mo><msub><mi>d</mi><mn>1</mn></msub><mo stretchy="false">(</mo><mi>a</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">d_m(a)...d_2(a)d_1(a)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mclose">)</span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mclose">)</span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mclose">)</span></span></span></span>，Radical inverse函数<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>ϕ</mi><mi>b</mi></msub></mrow><annotation encoding="application/x-tex">\phi_b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal">ϕ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">b</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>表示将数字串取反, 并在前面加上0.，变为<br />
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>ϕ</mi><mi>b</mi></msub><mi>a</mi><mo>=</mo><mn>0.</mn><msub><mi>d</mi><mn>1</mn></msub><mo stretchy="false">(</mo><mi>a</mi><mo stretchy="false">)</mo><msub><mi>d</mi><mn>2</mn></msub><mo stretchy="false">(</mo><mi>a</mi><mo stretchy="false">)</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><msub><mi>d</mi><mi>m</mi></msub><mo stretchy="false">(</mo><mi>a</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\phi_{b}a=0.d_1(a)d_2(a)...d_m(a)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal">ϕ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">b</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">0</span><span class="mord">.</span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mclose">)</span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mclose">)</span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mclose">)</span></span></span></span>，非负整数转化为[0,1)小数，第<br />
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathnormal">i</span></span></span></span>位上的数字<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mi>i</mi></msub><mo stretchy="false">(</mo><mi>a</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">d_i(a)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mclose">)</span></span></span></span>对Radical inverse的贡献值为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><msub><mi>d</mi><mi>i</mi></msub><mo stretchy="false">(</mo><mi>a</mi><mo stretchy="false">)</mo></mrow><msup><mi>b</mi><mi>i</mi></msup></mfrac></mrow><annotation encoding="application/x-tex">\frac{d_i(a)}{b^i}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.355em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">b</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7570857142857143em;"><span style="top:-2.786em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.485em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3280857142857143em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">a</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>。</p>
<p>取<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>b</mi><mo>=</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">b=2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span></span></span></span>，得到van der Corput 序列<br />
<img src="https://uninaruto.oss-cn-shanghai.aliyuncs.com/img/2022-12-10-16-49-57.png" alt="" /></p>
<p>要生成n维下的Halton序列, 我们只需要在每个维度上使用不同的基, 产生Radical Inverse序列即可. 因为每个维度上的基必须是互质的, 因此一个很自然的选择是使用前n个质数<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>p</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">p_n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>作为每个维度的基：</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mi>a</mi></msub><mo>=</mo><mo stretchy="false">(</mo><msub><mi>ϕ</mi><mn>2</mn></msub><mo stretchy="false">(</mo><mi>a</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><msub><mi>ϕ</mi><mn>3</mn></msub><mo stretchy="false">(</mo><mi>a</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><msub><mi>ϕ</mi><msub><mi>p</mi><mi>n</mi></msub></msub><mo stretchy="false">(</mo><mi>a</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">x_a=(\phi_2(a),\phi_3(a),...,\phi_{p_n}(a))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">a</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">ϕ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">ϕ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">ϕ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.16454285714285719em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mclose">)</span><span class="mclose">)</span></span></span></span></p>
<p>Halton序列不需要提前设定需要用到的采样点总个数, 序列前面的采样点总是良好分布的。</p>
<p>当Halton中使用的基的值比较大时, 如果采样点较少, 会出现采样点聚集的情况。<br />
<img src="https://uninaruto.oss-cn-shanghai.aliyuncs.com/img/2022-12-10-16-57-04.png" alt="" /></p>
<p>scambling操作就是将 Halton进制表示中的每个数字进行一次重映射：</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>ϕ</mi><mi>b</mi></msub><mi>a</mi><mo>=</mo><mn>0.</mn><mi>p</mi><mo stretchy="false">(</mo><msub><mi>d</mi><mn>1</mn></msub><mo stretchy="false">(</mo><mi>a</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mi>p</mi><mo stretchy="false">(</mo><msub><mi>d</mi><mn>2</mn></msub><mo stretchy="false">(</mo><mi>a</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><mi>p</mi><mo stretchy="false">(</mo><msub><mi>d</mi><mi>m</mi></msub><mo stretchy="false">(</mo><mi>a</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\phi_ba=0.p(d_1(a))p(d_2(a))...,p(d_m(a))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal">ϕ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">b</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">0</span><span class="mord">.</span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mclose">)</span><span class="mclose">)</span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mclose">)</span><span class="mclose">)</span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mclose">)</span><span class="mclose">)</span></span></span></span><br />
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">p</span></span></span></span>表示一个表示重映射的数字排列, 每个基使用一个不同的排列(第一位必须是0). 每个质数基对应的排列可以查表获取：<a href="https://gruenschloss.org/">Leonhard Grünschloß</a></p>
<h3 id="hammersley序列"><a class="markdownIt-Anchor" href="#hammersley序列"></a> Hammersley序列</h3>
<p>如果需要的采样点个数<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span>是提前确定的, 则可以得到Hammersley序列:</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mi>a</mi></msub><mo>=</mo><mo stretchy="false">(</mo><mfrac><mi>a</mi><mi>N</mi></mfrac><mo separator="true">,</mo><msub><mi>ϕ</mi><msub><mi>b</mi><mn>1</mn></msub></msub><mo stretchy="false">(</mo><mi>a</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><msub><mi>ϕ</mi><msub><mi>b</mi><mn>2</mn></msub></msub><mo stretchy="false">(</mo><mi>a</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><msub><mi>ϕ</mi><msub><mi>b</mi><mi>n</mi></msub></msub><mo stretchy="false">(</mo><mi>a</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">x_a=(\frac{a}{N},\phi_{b_1}(a),\phi_{b_2}(a),...,\phi_{b_n}(a))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">a</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.095em;vertical-align:-0.345em;"></span><span class="mopen">(</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.695392em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">a</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">ϕ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2501em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">ϕ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2501em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">ϕ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.16454285714285719em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2501em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mclose">)</span><span class="mclose">)</span></span></span></span></p>
<h3 id="sobol序列"><a class="markdownIt-Anchor" href="#sobol序列"></a> Sobol序列</h3>
<p>Sobol序列的每一个维度都是由底数为2的radical inversion组成，但每一个维度的radical inversion都有各自不同的矩阵。</p>
<p>因为Sobol序列需要一个生成矩阵<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi></mrow><annotation encoding="application/x-tex">C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span></span></span></span>，而且所有维度都以2为底，所以没有Halton那样在以比较大的数为底时需要用Scrambling来消除分布间的correlation这个问题。<a href="http://web.maths.unsw.edu.au/~fkuo/sobol/">Sobol sequence generator </a>网站可生成矩阵。</p>
<h2 id="cross-entropy-sampling-交叉熵取样"><a class="markdownIt-Anchor" href="#cross-entropy-sampling-交叉熵取样"></a> Cross-Entropy Sampling 交叉熵取样</h2>
<h3 id="交叉熵"><a class="markdownIt-Anchor" href="#交叉熵"></a> 交叉熵</h3>
<p>事件发生的概率越小，可获取的信息量越大，事件<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">x_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>的<strong>信息量</strong>是<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>I</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mn>0</mn></msub><mo stretchy="false">)</mo><mo>=</mo><mtext>−</mtext><mi>l</mi><mi>o</mi><mi>g</mi><mo stretchy="false">(</mo><mi>p</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mn>0</mn></msub><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">I(x_0)=−log(p(x_0))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">−</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mclose">)</span></span></span></span></p>
<p><img src="https://uninaruto.oss-cn-shanghai.aliyuncs.com/img/2022-12-10-17-15-19.png" alt="" /></p>
<p><strong>熵</strong>用来表示所有信息量的期望，即：</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>H</mi><mo stretchy="false">(</mo><mi>X</mi><mo stretchy="false">)</mo><mo>=</mo><mtext>−</mtext><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></msubsup><mi>p</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mi>l</mi><mi>o</mi><mi>g</mi><mo stretchy="false">(</mo><mi>p</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">H(X)=−\sum_{i=1}^np(x_i)log(p(x_i))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.104002em;vertical-align:-0.29971000000000003em;"></span><span class="mord">−</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.804292em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.29971000000000003em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mclose">)</span></span></span></span></p>
<p><strong>相对熵</strong>又称KL散度,如果我们对于同一个随机变量 x 有两个单独的概率分布 P(x) 和 Q(x)，我们可以使用 KL 散度（Kullback-Leibler (KL) divergence）来衡量这两个分布的差异<br />
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span>为事件的所有可能性。<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi></mrow><annotation encoding="application/x-tex">D</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span></span></span></span>的值越小，表示<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">p</span></span></span></span>分布和<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi></mrow><annotation encoding="application/x-tex">q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">q</span></span></span></span>分布越接近。</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>D</mi><mrow><mi>K</mi><mi>L</mi></mrow></msub><mo stretchy="false">(</mo><mi>p</mi><mi mathvariant="normal">∣</mi><mi mathvariant="normal">∣</mi><mi>q</mi><mo stretchy="false">)</mo><mo>=</mo><msubsup><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></msubsup><mi>p</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mi>j</mi></msub><mo stretchy="false">)</mo><mi>l</mi><mi>n</mi><mfrac><mrow><mi>p</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mi>j</mi></msub><mo stretchy="false">)</mo></mrow><mrow><mi>q</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mi>j</mi></msub><mo stretchy="false">)</mo></mrow></mfrac></mrow><annotation encoding="application/x-tex">D_{KL}(p||q)=\sum_{j=1}^np(x_j)ln\frac{p(x_j)}{q(x_j)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em;">K</span><span class="mord mathnormal mtight">L</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">p</span><span class="mord">∣</span><span class="mord">∣</span><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.5746399999999998em;vertical-align:-0.5423199999999999em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.804292em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.43581800000000004em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">n</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.03232em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span><span class="mopen mtight">(</span><span class="mord mtight"><span class="mord mathnormal mtight">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3280857142857143em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2818857142857143em;"><span></span></span></span></span></span></span><span class="mclose mtight">)</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.50732em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="mopen mtight">(</span><span class="mord mtight"><span class="mord mathnormal mtight">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3280857142857143em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2818857142857143em;"><span></span></span></span></span></span></span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.5423199999999999em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></p>
<p>交叉熵方法，与进化算法类似，进化算法在空间中按照某种规则撒点，获得每个点的误差，再根据这些误差信息决定下一轮撒点的规则。交叉熵方法从理论上来说目标是最小化随机撒点得到的数据分布与数据实际分布的交叉熵（等价于最小化KL距离），尽量使采样分布（撒的点）与实际情况同分布。<br />
交叉熵（Cross Entropy）是Shannon信息论中一个重要概念，主要用于度量两个概率分布间的差异性信息。在信息论中，交叉熵是表示两个概率分布<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mo separator="true">,</mo><mi>q</mi></mrow><annotation encoding="application/x-tex">p, q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">p</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">q</span></span></span></span>的差异，其中<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">p</span></span></span></span>表示真实分布，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi></mrow><annotation encoding="application/x-tex">q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">q</span></span></span></span>表示预测分布，那么<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>H</mi><mo stretchy="false">(</mo><mi>p</mi><mo separator="true">,</mo><mi>q</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">H(p,q)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="mopen">(</span><span class="mord mathnormal">p</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="mclose">)</span></span></span></span>就称为交叉熵：</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>H</mi><mo stretchy="false">(</mo><mi>p</mi><mo separator="true">,</mo><mi>q</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mo>∑</mo><mi>i</mi></msub><msub><mi>p</mi><mi>i</mi></msub><mi>l</mi><mi>n</mi><mfrac><mn>1</mn><msub><mi>q</mi><mi>i</mi></msub></mfrac><mo>=</mo><mo>−</mo><msub><mo>∑</mo><mi>i</mi></msub><msub><mi>p</mi><mi>i</mi></msub><mi>l</mi><mi>n</mi><msub><mi>q</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">H(p,q)=\sum_ip_iln\frac{1}{q_i}=-\sum_ip_ilnq_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="mopen">(</span><span class="mord mathnormal">p</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.326216em;vertical-align:-0.481108em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.16195399999999993em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.29971000000000003em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">n</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3280857142857143em;"><span style="top:-2.357em;margin-left:-0.03588em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.481108em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.0497100000000001em;vertical-align:-0.29971000000000003em;"></span><span class="mord">−</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.16195399999999993em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.29971000000000003em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">n</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></p>
<p>公式为KL公式变形后（<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>−</mo><mi>H</mi><mo stretchy="false">(</mo><mi>p</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo>+</mo><mi>H</mi><mo stretchy="false">(</mo><mi>p</mi><mo separator="true">,</mo><mi>q</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">-H(p(x))+H(p,q)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">−</span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="mopen">(</span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="mopen">(</span><span class="mord mathnormal">p</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="mclose">)</span></span></span></span>）的后一部分，机器学习中需要评估标签值和预测值之间的差距，可使用KL散度，由于KL散度中的前一部分是p的熵不变，故在优化过程中，只需要关注交叉熵。所以一般在机器学习中直接用交叉熵做损失函数来评估模型。</p>
<p>单个样本，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span>为分类个数：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi><mi>o</mi><mi>s</mi><mi>s</mi><mo>=</mo><mo>−</mo><msubsup><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></msubsup><msub><mi>y</mi><mi>j</mi></msub><mi>l</mi><mi>n</mi><msub><mi>a</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">loss=-\sum_{j=1}^ny_jlna_j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal">s</span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.24011em;vertical-align:-0.43581800000000004em;"></span><span class="mord">−</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.804292em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.43581800000000004em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">n</span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span></p>
<p>批量样本交叉熵，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">m</span></span></span></span>为样本个数，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span>为分类个数：</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>J</mi><mo>=</mo><mo>−</mo><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>m</mi></msubsup><msubsup><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></msubsup><msub><mi>y</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mi>l</mi><mi>n</mi><msub><mi>a</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub></mrow><annotation encoding="application/x-tex">J=-\sum_{i=1}^m\sum_{j=1}^ny_{ij}lna_{ij}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.09618em;">J</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.24011em;vertical-align:-0.43581800000000004em;"></span><span class="mord">−</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.804292em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.29971000000000003em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.804292em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.43581800000000004em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">n</span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span></p>
<p>首先从一个初始的高斯分布中取样参数w，对取样的参数计算函数f值大小<br />
保留最大的几个样本，从这些样本中估计新的高斯分布的均值和方差，随后从新的分布中再次取样，迭代<br />
f: 目标函数，从向量w到数值的映射，数值代表w的优秀程度</p>
<h3 id="cem-交叉熵方法"><a class="markdownIt-Anchor" href="#cem-交叉熵方法"></a> CEM 交叉熵方法</h3>
<p>考虑估计一个期望，用朴素蒙特卡罗采样从真实概率密度函数<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">;</mo><mi>u</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(x;u)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">u</span><span class="mclose">)</span></span></span></span>中采样一些样本<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">x_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><br />
，然后计算<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mn>1</mn><mi>n</mi></mfrac><msub><mo>∑</mo><mi>n</mi></msub><mi>H</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mi>i</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\frac{1}{n}\sum_nH(x_i)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.190108em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.0016819999999999613em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.29971000000000003em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>，若事件<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>H</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">H(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span>发生的概率很小，那么朴素蒙特卡罗需要非常多的样本代价才能估计准这个期望；CEM算法则引入重要性采样(importance sampling)，从另一个类似的概率密度函数<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">;</mo><mi>v</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(x;v)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mclose">)</span></span></span></span>中进行采样，则期望计算变成：</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mn>1</mn><mi>n</mi></mfrac><msub><mo>∑</mo><mi>n</mi></msub><mi>H</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mi>W</mi><mo stretchy="false">(</mo><mi>z</mi><mo separator="true">;</mo><mi>u</mi><mo separator="true">,</mo><mi>v</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\frac{1}{n}\sum_nH(x_i)W(z;u,v)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.190108em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.0016819999999999613em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.29971000000000003em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">u</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mclose">)</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>W</mi><mo stretchy="false">(</mo><mi>z</mi><mo separator="true">;</mo><mi>u</mi><mo separator="true">,</mo><mi>v</mi><mo stretchy="false">)</mo><mo>=</mo><mfrac><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">;</mo><mi>u</mi><mo stretchy="false">)</mo></mrow><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>v</mi><mo stretchy="false">)</mo></mrow></mfrac></mrow><annotation encoding="application/x-tex">W(z;u,v)=\frac{f(x;u)}{f(x,v)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">u</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.53em;vertical-align:-0.52em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10764em;">f</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">x</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span><span class="mclose mtight">)</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.485em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10764em;">f</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">x</span><span class="mpunct mtight">;</span><span class="mord mathnormal mtight">u</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.52em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></p>
<p>于是现在的目标变成了如何找到一个最优的采样函数<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>v</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(x,v)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mclose">)</span></span></span></span>去指导采样出一些少量的样本来准确地估计这个期望，CEM通过在每次迭代中找到较好的采样样本<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">x</span></span></span></span>来更新重要性函数的参数<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi></mrow><annotation encoding="application/x-tex">v</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span></span></span></span>(reference parameter)，目的是减小两个分布的差距，而这个差距是由KL散度来衡量的.</p>
<p>详细论文：<a href="https://dke.maastrichtuniversity.nl/m.winands/documents/crossmc.pdf">https://dke.maastrichtuniversity.nl/m.winands/documents/crossmc.pdf</a></p>
<p>参考</p>
<ul>
<li><a href="https://zhuanlan.zhihu.com/p/343666731">https://zhuanlan.zhihu.com/p/343666731</a></li>
<li><a href="https://microsoft.github.io/ai-edu/%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/A2-%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86/%E7%AC%AC1%E6%AD%A5%20-%20%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86/03.2-%E4%BA%A4%E5%8F%89%E7%86%B5%E6%8D%9F%E5%A4%B1%E5%87%BD%E6%95%B0.html">https://microsoft.github.io/ai-edu/基础教程/A2-神经网络基本原理/第1步 - 基本知识/03.2-交叉熵损失函数.html</a></li>
<li><a href="https://the0demiurge.blogspot.com/2017/08/cross-entropy-method-cem.html">https://the0demiurge.blogspot.com/2017/08/cross-entropy-method-cem.html</a></li>
<li><a href="https://en.wikipedia.org/wiki/Cross-entropy_method">https://en.wikipedia.org/wiki/Cross-entropy_method</a></li>
<li><a href="https://web.maths.unsw.edu.au/~josefdick/MCQMC_Proceedings/MCQMC_Proceedings_2012_Preprints/100_Keller_tutorial.pdf">https://web.maths.unsw.edu.au/~josefdick/MCQMC_Proceedings/MCQMC_Proceedings_2012_Preprints/100_Keller_tutorial.pdf</a></li>
</ul>
<h1 id="改进"><a class="markdownIt-Anchor" href="#改进"></a> 改进</h1>
]]></content>
      <categories>
        <category>Basic</category>
      </categories>
      <tags>
        <tag>ML</tag>
        <tag>Runtime Verification</tag>
        <tag>note</tag>
      </tags>
  </entry>
  <entry>
    <title>「Course」可解释人工智能概述</title>
    <url>/posts/d59c5c61/</url>
    <content><![CDATA[<p>可解释人工智能导论 Chapter1：可解释人工智能概述</p>
<span id="more"></span>
]]></content>
      <categories>
        <category>AI</category>
      </categories>
      <tags>
        <tag>note</tag>
        <tag>AI</tag>
        <tag>overview</tag>
      </tags>
  </entry>
</search>
